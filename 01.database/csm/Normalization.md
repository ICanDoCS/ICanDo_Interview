## Normalization

#### 💡 정규화를 왜 진행하나요?

- 릴레이션 내에서 중복을 제거해 이상과 같은 문제를 해결하기 위해 진행합니다.



#### 💡 데이터의 중복을 피할수있는데 역정규화는 왜실행하나요? / 모든 테이블에 정규화를 진행하나요?

- 정규화를 통해 데이터를 Entity 단위로 분리할 경우, 필요한 데이터가 하나의 테이블에 있지 않은 경우가 있습니다. 필요한 데이터를 가져오기 위해 JOIN을 수행하고, 이 경우 연산 시간과 비용이 증가합니다.
  역정규화는 JOIN으로 인한 비용을 최소화하기 위해 실행합니다.



#### 💡 정규화 단계별 과정에 대해 설명하시오.

- 제1 정규화에서는 테이블의 컬럼이 <u>원자값</u>을 갖도록 테이블을 분해합니다.

  제2 정규화에서는 제1 정규화를 진행한 테이블에 대해 <u>완전 함수 종속</u>을 만족하도록 테이블을 분해합니다.

  제3 정규화에서는 제2 정규화를 진행한 테이블에 대해 <u>이행적 종속을 없애도록</u> 테이블을 분해합니다.



## 🏃🏻‍♀️ 정리

### 정규화

- **[기본 목표]** 테이블 간에 중복된 데이터를 허용하지 않는다.

  중복된 데이터를 허용하지 않음으로써 **무결성(Integrity)을 유지**할 수 있으며, DB의 저장 용량도 줄일 수 있다.



### 정규화 단계

#### [제1 정규화]

- 테이블의 컬럼이 **원자값(Atomic Value, 하나의 값)**을 갖도록 테이블을 분해하는 것

  

  아래와 같은 테이블이 있을 때, 추신수와 박세리는 여러 개의 취미를 갖고 있다. 즉, 원자값이 아니다.

  ![Normalization_1](/Users/soomin/Desktop/Study/ICanDo_Interview/01.database/csm/src/Normalization_1.png)

  정규화 후에는 아래와 같이 하나의 값을 갖도록 바뀐다.

  ![Normalization_1_after](/Users/soomin/Desktop/Study/ICanDo_Interview/01.database/csm/src/Normalization_1_after.png)

  



#### [제2 정규화]

- 제1 정규화를 진행한 테이블에 대해 **완전 함수 종속**을 만족하도록 테이블을 분해한다.
- **완전 함수 종속** : 기본키의 부분 집합이 결정자가 되어서는 안된다.



​		아래와 같은 테이블이 있을 때, 이 테이블에서 기본키는 (학생번호, 강좌이름)으로 복합키이다.

​		또한, (학생번호, 강좌이름)인 기본키는 강의실을 결정하고 있다.

​		그런데, 여기서 강의실이라는 컬럼은 기본키의 부분집합인 강좌이름에 의해 결정될 수 있다.

​		또, 성적이라는 컬럼은 학생번호에 의해 결정될 수 있다.

​		그렇기 때문에 아래 테이블의 경우 기존 테이블에서 강의실을 분해하여 별도의 테이블로 관리하면 완전 함수 종속을 만족하고, 제2 정규형을 만족하게 된다.

​		![Normalization_2](/Users/soomin/Desktop/Study/ICanDo_Interview/01.database/csm/src/Normalization_2.png)

​	

​		제2 정규화 후에는 아래와 같이 바뀐다.

​	![Normalization_2_after](/Users/soomin/Desktop/Study/ICanDo_Interview/01.database/csm/src/Normalization_2_after.png)



#### [제3 정규화]

- 제2 정규화를 진행한 테이블에 대해 **이행적 종속을 없애도록** 테이블을 분해하는 것

- 이행적 종속 : A -> B, B -> C가 성립할 때, A -> C가 성립되는 것



​		다음과 같은 테이블이 있다.

​		![Normalization_3](/Users/soomin/Desktop/Study/ICanDo_Interview/01.database/csm/src/Normalization_3.png)

​		학생 번호는 강좌 이름을 결정하고 있고, 강좌 이름은 수강료를 결정하고 있다.

​		즉, 학생 번호 -> 강좌 이름, 강좌 이름 -> 수강료이므로, (학생 번호, 강좌 이름) 테이블과 (강좌 이름, 수강료) 테이블로 분해해야 한다.

​		이유) 만약 501번 학생이 수강하는 강좌가 스포츠경영학으로 변경되었을 때, 이행적 종속이 존재할 경우, 501번 학생은 스포츠경영학이라는 수업을 20000원에 듣게 된다.

​		이행적 종속을 없애면, 학생 번호를 통해 강좌 이름을 참조하고, 강좌 이름으로 수강료를 참조하도록 테이블을 분해하게 된다.



![Normalization_3_after](/Users/soomin/Desktop/Study/ICanDo_Interview/01.database/csm/src/Normalization_3_after.png)



### 정규화의 단점

- 정규화를 통해 데이터를 Entity 단위로 분리하고, 각 데이터 간의 Relation을 만들었다면, 필요한 데이터가 하나의 테이블에 있지 않은 경우가 많다.

  즉, 필요한 정보가 해당 테이블에 없기 때문에 다른 테이블과 JOIN을 통해 정보를 가져와야 하고, 이는 연산 시간과 비용을 증가시킬 수 있다.



### 역정규화

- 데이터베이스의 비용을 최소화하기 위해 중복을 허용하며, 정규화된 Entity, 속성, 관계를 시스템의 성능 향상 및 개발과 운영의 단순화를 위해 중복의 통합, 분리 등을 수행하는 데이터 모델링 기법 중 하나
- 디스크 I/O량이 많아서 조회 시 성능이 저하되거나, 테이블끼리의 경로가 너무 멀어 JOIN으로 인한 성능 저하가 예상되거나, 칼럼을 계산하여 조회할 때 성능이 저하될 것이 예상되는 경우 수행
- 일반적으로 **조회에 대한 처리 성능**이 중요하다고 판단될 때 고려



### 역정규화를 할 때 고려할 점

- 무결성이 떨어진다.
- 조회 속도는 빨라지지만 쓰기(삽입, 수정, 삭제) 속도는 느려진다.
- 저장공간의 효율이 떨어진다.
- 유지보수가 어렵다.



---

**[침고]**

[정규화 & 역정규화 1](https://jaenjoy.tistory.com/15)

[정규화 & 역정규화 2](https://asfirstalways.tistory.com/341)

[정규화 & 비정규화](https://owlyr.tistory.com/20)

[역정규화](https://chankim.tistory.com/m/7)

[정규화 과정](https://dodo000.tistory.com/21)

[정규화 과정2](https://victorydntmd.tistory.com/132)

[정규화 과정3](https://mangkyu.tistory.com/110)